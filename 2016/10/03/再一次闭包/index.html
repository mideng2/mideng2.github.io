<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="前端,js," />








  <link rel="shortcut icon" type="image/x-icon" href="/straw.ico?v=5.0.1" />






<meta name="description" content="结合例子理解闭包">
<meta property="og:type" content="article">
<meta property="og:title" content="再一次闭包">
<meta property="og:url" content="http://yoursite.com/2016/10/03/再一次闭包/index.html">
<meta property="og:site_name" content="阿炸炸炸酱の饮食记录">
<meta property="og:description" content="结合例子理解闭包">
<meta property="og:image" content="http://yoursite.com/1ec13816-da44-419a-8b30-08a402deb491_128_files/eb2074b1-4cfe-4f25-b932-117b35357b51.png">
<meta property="og:image" content="http://yoursite.com/1ec13816-da44-419a-8b30-08a402deb491_128_files/2fef3100-c8dc-41cf-aca9-36049d16fc29.png">
<meta property="og:updated_time" content="2016-10-03T14:17:59.929Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="再一次闭包">
<meta name="twitter:description" content="结合例子理解闭包">
<meta name="twitter:image" content="http://yoursite.com/1ec13816-da44-419a-8b30-08a402deb491_128_files/eb2074b1-4cfe-4f25-b932-117b35357b51.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/10/03/再一次闭包/"/>

  <title> 再一次闭包 | 阿炸炸炸酱の饮食记录 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">阿炸炸炸酱の饮食记录</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                再一次闭包
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-03T22:08:53+08:00" content="2016-10-03">
              2016-10-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style>

<p><style id="wiz_custom_css">        html, body {            font-size: 15px;        }        body {            font-family: Helvetica, ‘Hiragino Sans GB’, ‘微软雅黑’, ‘Microsoft YaHei UI’, SimSun, SimHei, arial, sans-serif;            line-height: 1.6;            margin: 0;            padding: 20px 36px;            padding: 1.33rem 2.4rem;        }        h1, h2, h3, h4, h5, h6 {            margin: 20px 0 10px;            margin: 1.33rem 0 0.667rem;            padding: 0;            font-weight: bold;        }        h1 {            font-size: 21px;            font-size: 1.4rem;        }        h2 {            font-size: 20px;            font-size: 1.33rem;        }        h3 {            font-size: 18px;            font-size: 1.2rem;        }        h4 {            font-size: 17px;            font-size: 1.13rem;        }        h5 {            font-size: 15px;            font-size: 1rem;        }        h6 {            font-size: 15px;            font-size: 1rem;            color: #777777;            margin: 1rem 0;        }        div, p, ul, ol, dl, li {            margin: 0;        }        blockquote, table, pre, code {            margin: 8px 0;        }        ul, ol {            padding-left: 32px;            padding-left: 2.13rem;        }        blockquote {            padding: 0 12px;            padding: 0 0.8rem;        }        blockquote &gt; :first-child {            margin-top: 0;        }        blockquote &gt; :last-child {            margin-bottom: 0;        }        img {            border: 0;            max-width: 100%;            height: auto !important;            margin: 2px 0;        }        table {            border-collapse: collapse;            border: 1px solid #bbbbbb;        }        td {            padding: 4px 8px;            border-collapse: collapse;            border: 1px solid #bbbbbb;        }        @media screen and (max-width: 660px) {            body {                padding: 20px 18px;                padding: 1.33rem 1.2rem;            }        }        @media only screen and (-webkit-max-device-width: 1024px), only screen and (-o-max-device-width: 1024px), only screen and (max-device-width: 1024px), only screen and (-webkit-min-device-pixel-ratio: 3), only screen and (-o-min-device-pixel-ratio: 3), only screen and (min-device-pixel-ratio: 3) {            html, body {                font-size: 17px;            }            body {                line-height: 1.7;                padding: 0.75rem 0.9375rem;                color: #353c47;            }            h1 {                font-size: 2.125rem;            }            h2 {                font-size: 1.875rem;            }            h3 {                font-size: 1.625rem;            }            h4 {                font-size: 1.375rem;            }            h5 {                font-size: 1.125rem;            }            h6 {                color: inherit;            }            ul, ol {                padding-left: 2.5rem;            }            blockquote {                padding: 0 0.9375rem;            }        }</style><style name="wiz_tmp_editor_style">html, body {    font-size: 15px;}body {    font-family: Helvetica, ‘Hiragino Sans GB’, 微软雅黑, ‘Microsoft YaHei UI’, SimSun, SimHei, arial, sans-serif;    line-height: 1.6;    color: ;    background-color: ;    margin: 0;    padding: 16px 20px;}h1, h2, h3, h4, h5, h6 {    margin: 20px 0 10px;    margin: 1.33rem 0 0.667rem;    padding: 0;    font-weight: bold;}h1 {    font-size: 21px;    font-size: 1.4rem;}h2 {    font-size: 20px;    font-size: 1.33rem;}h3 {    font-size: 18px;    font-size: 1.2rem;}h4 {    font-size: 17px;    font-size: 1.13rem;}h5 {    font-size: 15px;    font-size: 1rem;}h6 {    font-size: 15px;    font-size: 1rem;    color: #777777;    margin: 1rem 0;}div, p, ul, ol, dl, li {    margin: 0;}blockquote, table, pre, code{    margin: 8px 0;}ul, ol {    padding-left: 32px;    padding-left: 2.13rem;}blockquote {    border-left: 4px solid #dddddd;    padding: 0 12px;    padding: 0 0.8rem;}blockquote &gt; :first-child {    margin-top: 0;}blockquote &gt; :last-child {    margin-bottom: 0;}img {    border: 0;    max-width: 100%;    height: auto !important;    margin: 2px 0;}table {    border-collapse: collapse;    border: 1px solid #bbbbbb;}td {    padding:4px 8px;    border-collapse: collapse;    border: 1px solid #bbbbbb;}@media screen and (max-width: 660px) {    body {        padding: 20px 18px;        padding: 1.33rem 1.2rem;    }}@media only screen and (-webkit-max-device-width: 1024px), only screen and (-o-max-device-width: 1024px), only screen and (max-device-width: 1024px), only screen and (-webkit-min-device-pixel-ratio: 3), only screen and (-o-min-device-pixel-ratio: 3), only screen and (min-device-pixel-ratio: 3) {    html, body {        font-size: 17px;    }    body {        line-height: 1.7;        padding: 0.75rem 0.9375rem;        color: #353c47;    }    h1 {        font-size: 2.125rem;    }    h2 {        font-size: 1.875rem;    }    h3 {        font-size: 1.625rem;    }    h4 {        font-size: 1.375rem;    }    h5 {        font-size: 1.125rem;    }    h6 {        color: inherit;    }    ul, ol {        padding-left: 2.5rem;    }    blockquote {        padding: 0 0.9375rem;    }}</style><link rel="stylesheet" type="text/css" href="file:///D:\Program Files (x86)\WizNote\WizNote\WizTools\htmleditor\editor.css" wiz_style="unsave" charset="utf-8"><link rel="stylesheet" type="text/css" href="file:///D:\Program Files (x86)\WizNote\WizNote\WizTools\htmleditor\scrollbar.css" wiz_style="unsave" charset="utf-8"><script type="text/javascript" src="file:///D:\Program Files (x86)\WizNote\WizNote\WizTools\htmleditor\utils.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///D:\Program Files (x86)\WizNote\WizNote\WizTools\htmleditor\localize.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///D:\Program Files (x86)\WizNote\WizNote\WizTools\htmleditor\core\wizEditor.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///D:\Program Files (x86)\WizNote\WizNote\WizTools\htmleditor\core\checklist\todo.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///D:\Program Files (x86)\WizNote\WizNote\WizTools\htmleditor\core\imageresize\dragresize.js" wiz_style="unsave" charset="utf-8"></script><script type="text/javascript" src="file:///D:\Program Files (x86)\WizNote\WizNote\WizTools\htmleditor\editorHelper.js" wiz_style="unsave" charset="utf-8"></script></p>
<body style="" contenteditable="true">优缺点：<div><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong>优点：</strong></p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">1. 逻辑连续，当闭包作为另一个函数调用的参数时，避免你脱离当前逻辑而单独编写额外逻辑。<br>2. 方便调用上下文的局部变量。<br>3. 加强封装性，第2点的延伸，可以达到对变量的保护作用。</p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong>缺点：</strong></p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">闭包有一个非常严重的问题，那就是内存浪费问题，这个内存浪费不仅仅因为它常驻内存，更重要的是，对闭包的使用不当会造成无效内存的产生</p><div>===========================================================================================================</div><div><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">先上段代码：</p><div class="jb51code" style="padding: 0px; line-height: 25.2px; font-size: 14px; width: 660px; overflow: hidden; clear: both; font-family: tahoma, arial, 宋体; widows: 1; background-color: rgb(255, 255, 255);"><div style="padding: 0px; line-height: 25.2px; font-size: 14px;"><div id="highlighter_207145" class="syntaxhighlighter  js" style="padding: 0px; width: 660px; font-size: 14px; line-height: 25.2px; margin-top: 1em !important; margin-bottom: 1em !important; position: relative !important; overflow: auto !important;"><div class="toolbar" style="line-height: 11px; font-size: 14px; padding: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; z-index: 10 !important; color: white !important; background-color: rgb(108, 226, 108) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="line-height: 21.6px; font-size: 12px;"><a href="http://www.jb51.net/article/68239.htm#" class="toolbar_item command_help help" style="color: rgb(0, 102, 153); text-decoration: none; font-size: 14px; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 1px 0px 0px !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;" target="_blank" rel="external">?</a></span></div><table border="0" cellpadding="0" cellspacing="0" style="border-spacing: 0px; border-color: rgb(204, 204, 204); margin-top: 0.54em; text-align: center; width: 660px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin-bottom: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tbody style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tr style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><td class="gutter" style="padding: 0.2em 0.46em; border-color: rgb(204, 204, 204); margin: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="line number1 index0 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">1</div><div class="line number2 index1 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">2</div><div class="line number3 index2 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">3</div><div class="line number4 index3 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">4</div><div class="line number5 index4 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">5</div><div class="line number6 index5 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">6</div><div class="line number7 index6 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">7</div><div class="line number8 index7 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">8</div><div class="line number9 index8 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">9</div><div class="line number10 index9 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">10</div><div class="line number11 index10 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">11</div><div class="line number12 index11 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">12</div><div class="line number13 index12 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">13</div><div class="line number14 index13 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">14</div></td><td class="code" style="padding: 0.2em 0.46em; border-color: rgb(204, 204, 204); width: 620.8px; margin: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="container" style="line-height: 15.4px; font-size: 14px; padding: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="line number1 index0 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js comments" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important; background-position: initial initial; background-repeat: initial initial;">//函数a</code></div><div class="line number2 index1 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">function</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">a()</code></div><div class="line number3 index2 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">{</code></div><div class="line number4 index3 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">var</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">i=0;</code></div><div class="line number5 index4 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js comments" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important; background-position: initial initial; background-repeat: initial initial;">//函数b</code></div><div class="line number6 index5 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">function</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">b()</code></div><div class="line number7 index6 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">{</code></div><div class="line number8 index7 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">alert(++i);</code></div><div class="line number9 index8 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">}</code></div><div class="line number10 index9 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">return</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">b;</code></div><div class="line number11 index10 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">}</code></div><div class="line number12 index11 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js comments" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important; background-position: initial initial; background-repeat: initial initial;">//函数c</code></div><div class="line number13 index12 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">var</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">c = a();</code></div><div class="line number14 index13 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">c();</code></div></div></td></tr></tbody></table></div></div></div><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong>代码特点：<br></strong></p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">1、函数b嵌套在函数a内部；<br>2、函数a返回函数b。<br>代码中函数a的内部函数b，被函数a外面的一个变量c引用的时候，这就叫创建了一个闭包。有时候函数b也可以用一个匿名函数代替来返回，即return function(){};</p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong>优点</strong>：1.保护函数内的变量安全,加强了封装性 2.在内存中维持一个变量(用的太多就变成了缺点，占内存)<br>闭包之所以会占用资源是当函数a执行结束后, 变量i不会因为函数a的结束而销毁, 因为b的执行需要依赖a中的变量。<br>不适合场景：返回闭包的函数是个非常大的函数</p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong>闭包的典型框架应该就是jquery了。</strong><br></p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">闭包是javascript语言的一大特点，主要应用闭包场合主要是为了：设计私有的方法和变量。<br>这在做框架的时候体现更明显，有些方法和属性只是运算逻辑过程中的使用的，不想让外部修改这些属性，因此就可以设计一个闭包来只提供方法获取。</p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">闭包的缺点就是常驻内存，会增大内存使用量，使用不当很容易造成内存泄露。</p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong>总结一下：</strong></p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong>优点：</strong></p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">1. 逻辑连续，当闭包作为另一个函数调用的参数时，避免你脱离当前逻辑而单独编写额外逻辑。<br>2. 方便调用上下文的局部变量。<br>3. 加强封装性，第2点的延伸，可以达到对变量的保护作用。</p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong>缺点：</strong></p><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">闭包有一个非常严重的问题，那就是内存浪费问题，这个内存浪费不仅仅因为它常驻内存，更重要的是，对闭包的使用不当会造成无效内存的产生，看下面的例子：</p><div class="jb51code" style="padding: 0px; line-height: 25.2px; font-size: 14px; width: 660px; overflow: hidden; clear: both; font-family: tahoma, arial, 宋体; widows: 1; background-color: rgb(255, 255, 255);"><div style="padding: 0px; line-height: 25.2px; font-size: 14px;"><div id="highlighter_383938" class="syntaxhighlighter  js" style="padding: 0px; width: 660px; font-size: 14px; line-height: 25.2px; margin-top: 1em !important; margin-bottom: 1em !important; position: relative !important; overflow: auto !important;"><div class="toolbar" style="line-height: 11px; font-size: 14px; padding: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; z-index: 10 !important; color: white !important; background-color: rgb(108, 226, 108) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="line-height: 21.6px; font-size: 12px;"><a href="http://www.jb51.net/article/68239.htm#" class="toolbar_item command_help help" style="color: rgb(0, 102, 153); text-decoration: none; font-size: 14px; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 1px 0px 0px !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;" target="_blank" rel="external">?</a></span></div><table border="0" cellpadding="0" cellspacing="0" style="border-spacing: 0px; border-color: rgb(204, 204, 204); margin-top: 0.54em; text-align: center; width: 660px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin-bottom: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tbody style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tr style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><td class="gutter" style="padding: 0.2em 0.46em; border-color: rgb(204, 204, 204); margin: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="line number1 index0 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">1</div><div class="line number2 index1 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">2</div><div class="line number3 index2 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">3</div><div class="line number4 index3 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">4</div><div class="line number5 index4 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">5</div><div class="line number6 index5 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">6</div><div class="line number7 index6 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">7</div><div class="line number8 index7 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">8</div><div class="line number9 index8 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">9</div><div class="line number10 index9 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">10</div><div class="line number11 index10 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">11</div><div class="line number12 index11 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">12</div><div class="line number13 index12 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">13</div></td><td class="code" style="padding: 0.2em 0.46em; border-color: rgb(204, 204, 204); width: 620.8px; margin: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="container" style="line-height: 15.4px; font-size: 14px; padding: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="line number1 index0 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">var</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">array = [];</code></div><div class="line number2 index1 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">function</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">abc() {</code></div><div class="line number3 index2 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">var</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">foo = </code><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">function</code><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">(){</code></div><div class="line number4 index3 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">}</code></div><div class="line number5 index4 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">array.push(foo);</code></div><div class="line number6 index5 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">return</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">foo;</code></div><div class="line number7 index6 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">}</code></div><div class="line number8 index7 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">for</code><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">(</code><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">var</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">i = 0 ; i &lt; 10000; i ++)</code></div><div class="line number9 index8 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">{</code></div><div class="line number10 index9 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">abc();</code></div><div class="line number11 index10 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">}</code></div><div class="line number12 index11 alt1" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&nbsp;</div><div class="line number13 index12 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">alert(array[0] == array[1]);</code></div></div></td></tr></tbody></table></div></div></div><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">通过上面的测试我们会看到这一万次abc()执行所产生的同一个逻辑的闭包的地址并不相同，也就是说它生产了一堆的一模一样的Function对象，这样有好处就是可以以工厂模式产生函数以备使用，然而如果你的稍有不慎将闭包当做常态逻辑使用，就不可避免的会造成内存垃圾。当中换个语法可能更好理解：</p><div class="jb51code" style="padding: 0px; line-height: 25.2px; font-size: 14px; width: 660px; overflow: hidden; clear: both; font-family: tahoma, arial, 宋体; widows: 1; background-color: rgb(255, 255, 255);"><div style="padding: 0px; line-height: 25.2px; font-size: 14px;"><div id="highlighter_434464" class="syntaxhighlighter  js" style="padding: 0px; width: 660px; font-size: 14px; line-height: 25.2px; margin-top: 1em !important; margin-bottom: 1em !important; position: relative !important; overflow: auto !important;"><div class="toolbar" style="line-height: 11px; font-size: 14px; padding: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; z-index: 10 !important; color: white !important; background-color: rgb(108, 226, 108) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="line-height: 21.6px; font-size: 12px;"><a href="http://www.jb51.net/article/68239.htm#" class="toolbar_item command_help help" style="color: rgb(0, 102, 153); text-decoration: none; font-size: 14px; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 1px 0px 0px !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;" target="_blank" rel="external">?</a></span></div><table border="0" cellpadding="0" cellspacing="0" style="border-spacing: 0px; border-color: rgb(204, 204, 204); margin-top: 0.54em; text-align: center; width: 660px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin-bottom: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tbody style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tr style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><td class="gutter" style="padding: 0.2em 0.46em; border-color: rgb(204, 204, 204); margin: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="line number1 index0 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 0.5em 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: rgb(108, 226, 108) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">1</div></td><td class="code" style="padding: 0.2em 0.46em; border-color: rgb(204, 204, 204); width: 628.8px; margin: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="container" style="line-height: 15.4px; font-size: 14px; padding: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div class="line number1 index0 alt2" style="line-height: 15.4px; font-size: 14px; padding: 0px 1em !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">var</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">foo = </code><code class="js keyword" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: bold !important; min-height: auto !important; color: rgb(0, 102, 153) !important; background-position: initial initial; background-repeat: initial initial;">new</code> <code class="js plain" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); line-height: 20px; width: 640px; font-size: 14px; clear: both; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; min-height: auto !important; background-position: initial initial; background-repeat: initial initial;">Function();</code></div></div></td></tr></tbody></table></div></div></div><p style="padding: 5px 0px; font-size: 14px; font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">所以关于闭包，就我自己的习惯而言，能不用就不用，如果非用不可，那就想办法保持闭包对象的数量很少甚至唯一。</p><br><div style="color:gray"><small>来源：&nbsp;<a href="http://www.jb51.net/article/68239.htm" target="_blank" rel="external">http://www.jb51.net/article/68239.htm</a></small></div></div></div><div style="color:gray"><br></div><div style="color:gray"><br></div><div style="color:gray"><br></div><div style="color:gray"><br></div><div style="color:gray"><br></div><div style="color:gray"><br></div><div style="color:gray">二、深入理解js闭包</div><div style="color:gray">以下这段代码在node中运行为undefined，在浏览器中运行为The Window。我认为是node没有一个所谓的window那样的全局对象。</div><div style="color:gray"><pre style="background-color:#404040;color:#9bc28e;font-family:'Consolas';font-size:10.8pt;"><span style="color:#ca9e4d;font-weight:bold;">var </span>name = <span style="color:#34ae34;font-weight:bold;">“The Window”</span>;<br><span style="color:#ca9e4d;font-weight:bold;">var </span>object = {<br>    <span style="color:#b9b9b9;font-weight:bold;">name </span>: <span style="color:#34ae34;font-weight:bold;">“My Object”</span>,<br>    <span style="color:#7a7a43;">getNameFunc </span>: <span style="color:#ca9e4d;font-weight:bold;">function</span><span style="font-weight:bold;">()</span>{<br>        <span style="color:#ca9e4d;font-weight:bold;">return function</span><span style="font-weight:bold;">()</span>{<br>            <span style="color:#ca9e4d;font-weight:bold;">return this</span>.<span style="color:#b9b9b9;font-weight:bold;">name</span>;<br>        };<br>    }<br>};<br><span style="color:#b9b9b9;font-weight:bold;">console</span>.<span style="color:#7a7a43;">log</span><span style="font-weight:bold;">(</span>object.<span style="color:#7a7a43;">getNameFunc</span><span style="font-weight:bold;">()())</span>;  <span style="color:#d14c42;">//The Window</span></pre></div><div style="color:gray"><br></div><div style="color:gray"><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(128, 0, 0);"><strong>一、变量的作用域</strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">要理解闭包，首先必须理解Javascript特殊的变量作用域。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">变量的作用域无非就是两种：全局变量和局部变量。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">Javascript语言的特殊之处，就在于函数内部可以直接读取全局变量。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><br>Js代码</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">var n=999;</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　function f1(){<br>　　　　alert(n);<br>　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　f1();&nbsp;</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">// 999</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">另一方面，在函数外部自然无法读取函数内的局部变量。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">Js代码</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">function f1(){<br>　　　　var n=999;<br>　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　alert(n);</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">&nbsp;// error</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">这里有一个地方需要注意，函数内部声明变量的时候，一定要使用var命令。如果不用的话，你实际上声明了一个全局变量！</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">Js代码</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">function f1(){<br>　　　　n=999;<br>　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　f1();</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　alert(n);</span>&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">// 999</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px;">——————————————————————————————————–</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong>二、如何从外部读取局部变量？</strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">出于种种原因，我们有时候需要得到函数内的局部变量。但是，前面已经说过了，正常情况下，这是办不到的，只有通过变通方法才能实现。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">那就是在函数的内部，再定义一个函数。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">Js代码</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">function f1(){</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　　　n=999;</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　　　function f2(){<br>　　　　　　alert(n);&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">// 999<br></span>　　　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">在上面的代码中，函数f2就被包括在函数f1内部，这时f1内部的所有局部变量，对f2都是可见的。但是反过来就不行，f2内部的局部变量，对f1 就是不可见的。这就是Javascript语言特有的“链式作用域”结构（chain scope），</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">子对象会一级一级地向上寻找所有父对象的变量。所以，父对象的所有变量，对子对象都是可见的，反之则不成立。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">既然f2可以读取f1中的局部变量，那么只要把f2作为返回值，我们不就可以在f1外部读取它的内部变量了吗！</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><br>Js代码</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">function f1(){</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　　　n=999;</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　　　function f2(){<br>　　　　　　alert(n);<br>　　　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　　　return f2;</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　var result=f1();</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　result();&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">// 999</span></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 0, 0);">——————————————————————————————————–</span></span></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong>三、闭包的概念</strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">上一节代码中的f2函数，就是闭包。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="background-color: rgb(255, 255, 255);">各种专业文献上的“闭包”（closure）定义非常抽象，很难看懂。我的理解是，</span><span style="background-color: rgb(127, 255, 212);">闭包就是能够读取其他函数内部变量的函数</span><span style="background-color: rgb(255, 255, 255);">。</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">由于在Javascript语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成“定义在一个函数内部的函数”。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px;">——————————————————————————————————–b</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong>四、闭包的用途</strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">闭包可以用在许多地方。它的最大用处有两个，<span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);">一</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);">个是前面提到的可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中</span>。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">怎么来理解这句话呢？请看下面的代码。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><br>Js代码</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">function f1(){</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　　　var n=999;</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);"><span style="background-color: rgb(255, 255, 255);">　　　　</span><span style="background-color: rgb(127, 255, 212);">nAdd</span><span style="background-color: rgb(255, 255, 255);">=function(){n+=1}</span></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　　　function f2(){<br>　　　　　　alert(n);<br>　　　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　　　return f2;</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　}</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　var result=f1();</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　result();&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">// 999</span></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　nAdd();</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">　　result();&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">// 1000</span></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="background-color: rgb(255, 255, 255);">在这段代码中，result实际上就是闭包f2函数。它一共运行了两次，第一次的值是999，第二次的值是1000。这证明了，</span><span style="background-color: rgb(127, 255, 212);">函数f1中的局部变量n一直保存在内存中，并没有在f1调用后被自动清除。</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="background-color: rgb(255, 255, 255);">为什么会这样呢？原</span><span style="background-color: rgb(127, 255, 212);">因就在于f1是f2的父函数，而f2被赋给了一个全局变量，这导致f2始终在内存中，而f2的存在依赖于f1，因此f1也始终在内存中，不会在调用结束后，被垃圾回收机制（garbage collection）回收。</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="background-color: rgb(127, 255, 212);">这段代码中另一个值得注意的地方，就是“nAdd=function(){n+=1}”这一行，首先在nAdd前面没有使用var关键字，因此 nAdd是一个全局变量，而不是局部变量。其次，nAdd的值是一个匿名函数（anonymous function），而这个</span><span style="background-color: rgb(127, 255, 212); font-size: 14px; line-height: 25.2px;">匿名函数本身也是一个闭包，所以nAdd相当于是一个setter，可以在函数外部对函数内部的局部变量进行操作。</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px;">——————————————————————————————————–</span>&nbsp;</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong>五、使用闭包的注意点</strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="background-color: rgb(127, 255, 212);">1）由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="background-color: rgb(127, 255, 212);">2）闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便</span><span style="background-color: rgb(127, 255, 212); font-size: 14px; line-height: 25.2px;">改变父函数内部变量的值。</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px;">——————————————————————————————————–</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong>六、思考题</strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">如果你能理解下面代码的运行结果，应该就算理解闭包的运行机制了。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">Js代码&nbsp;<br>　　<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">var name = “The Window”;&nbsp;&nbsp;&nbsp;<br>　　var object = {&nbsp;&nbsp;&nbsp;<br>　　　　name : “My Object”,&nbsp;&nbsp;&nbsp;<br>　　　　getNameFunc : function(){&nbsp;&nbsp;&nbsp;<br>　　　　　　return function(){&nbsp;&nbsp;&nbsp;<br>　　　　　　　　return this.name;&nbsp;&nbsp;&nbsp;<br>　　　　　};&nbsp;&nbsp;&nbsp;<br>　　　　}&nbsp;&nbsp;&nbsp;<br>};&nbsp;&nbsp;&nbsp;<br>alert(object.getNameFunc()());&nbsp;&nbsp;</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">//The Window</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 0, 0);">——————————————————————————————————–</span><br></span><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong>JavaScript闭包例子</strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">function outerFun()<br>&nbsp;{<br>&nbsp;&nbsp;var a=0;<br>&nbsp;&nbsp;function innerFun()<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;a++;<br>&nbsp;&nbsp;&nbsp;alert(a);<br>&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;}<br>innerFun()</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">上面的代码是<span style="line-height: 21.6px; font-size: 12px; color: rgb(255, 0, 0);">错误</span>的.innerFun()的作用域在outerFun()内部,所在outerFun()外部调用它是错误的.</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">改成如下,也就是闭包:</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">Js代码</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);"><span style="background-color: rgb(255, 255, 255);">function outerFun()</span><br><span style="background-color: rgb(255, 255, 255);">{</span><br><span style="background-color: rgb(255, 255, 255);">&nbsp;var a=0;</span><br><span style="background-color: rgb(255, 255, 255);">&nbsp;function innerFun()</span><br><span style="background-color: rgb(255, 255, 255);">&nbsp;{</span><br><span style="background-color: rgb(255, 255, 255);">&nbsp;&nbsp;a++;</span><br><span style="background-color: rgb(255, 255, 255);">&nbsp;&nbsp;alert(a);</span><br><span style="background-color: rgb(255, 255, 255);">&nbsp;}</span><br><span style="background-color: rgb(255, 255, 255);">&nbsp;return innerFun;&nbsp;&nbsp;</span><span style="background-color: rgb(255, 255, 255); line-height: 21.6px; font-size: 12px; color: rgb(0, 0, 0);">//注意这里<br></span><span style="background-color: rgb(255, 255, 255);">}</span><br><span style="background-color: rgb(255, 255, 255);">var obj=outerFun();</span><br><span style="background-color: rgb(127, 255, 212);">obj();&nbsp;&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">//结果为1<br></span>obj();&nbsp;&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">//结果为2<br></span>var obj2=outerFun();<br>obj2();&nbsp;&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">//结果为1<br></span>obj2();&nbsp;&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">//结果为2</span></span></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">什么是闭包:</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">当内部函数 在定义它的作用域 的外部 被引用时,就创建了该内部函数的闭包 ,如果内部函数引用了位于外部函数的变量,当外部函数调用完毕后,这些变量在内存不会被 释放,因为闭包需要它们.</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">——————————————————————————————————–</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong>再来看一个例子</strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">Js代码</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">function outerFun()<br>{<br>&nbsp;var a =0;<br>&nbsp;alert(a);&nbsp;&nbsp;<br>}<br>var a=4;<br>outerFun();<br>alert(a);</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">结果是&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">0,4</span>&nbsp;.&nbsp; 因为在函数内部使用了var关键字 维护a的作用域在outFun()内部.</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">再看下面的代码:</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">Js代码&nbsp;<br><br><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 51, 153);">function outerFun()<br>{<br>&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 0, 0);">//没有var&nbsp;</span><br>&nbsp;a =0;<br>&nbsp;alert(a);&nbsp;&nbsp;<br>}<br>var a=4;<br>outerFun();<br>alert(a);</span><br>结果为&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 128, 0);">0,0&nbsp;</span>真是奇怪,为什么呢?</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1;"><span style="background-color: rgb(255, 255, 255);">作用域链是描述一种路径的术语,沿着该路径可以确定变量的值 .</span><span style="background-color: rgb(127, 255, 212);">当执行a=0时,因为没有使用var关键字,因此赋值操作会沿着作用域链到var a=4;&nbsp; 并改变其值</span><span style="background-color: rgb(255, 255, 255);">.</span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);">————————————————————————————————————————————————–<br></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">如果你对javascript闭包还不是很理解，那么请看下面转载的文章：(转载:<a href="http://www.felixwoo.com/archives/247" target="_blank" rel="external">http://www.felixwoo.com/archives/247</a>)<br><br></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 0, 0);">一、什么是闭包？</span></strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">官方”的解释是：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。<br>相信很少有人能直接看懂这句话，因为他描述的太学术。其实这句话通俗的来说就是：<strong>JavaScript中所有的function都是一个闭包</strong>。不过一般来说，嵌套的function所产生的闭包更为强大，也是大部分时候我们所谓的“闭包”。看下面这段代码：</p><pre class="javascript" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; width: 640px; line-height: 20px; clear: both; font-size: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; border-left-style: solid; color: rgb(0, 0, 0); widows: 1; background-color: rgb(255, 255, 255); background-position: initial initial; background-repeat: initial initial;"><span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">function</span> a<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">{</span> <br> <span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">var</span> i <span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">=</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(204, 0, 0);">0</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;</span> <br> <span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">function</span> b<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">{</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 0, 102);">alert</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">++</span>i<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">}</span> <br> <span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 0, 102);">return</span> b<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;<br></span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">}<br></span><span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">var</span> c <span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">=</span> a<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;<br></span>c<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;</span></pre><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">这段代码有两个特点：</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">1、函数b嵌套在函数a内部；</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">2、函数a返回函数b。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">引用关系如图：</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><img src="1ec13816-da44-419a-8b30-08a402deb491_128_files/eb2074b1-4cfe-4f25-b932-117b35357b51.png" style="border: 1px solid rgb(204, 204, 204); vertical-align: bottom; padding: 1px; overflow: hidden; max-width: 650px;"></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　这样在执行完var c=a()后，变量c实际上是指向了函数b，再执行c()后就会弹出一个窗口显示i的值(第一次为1)。这段代码其实就创建了一个闭包，为什么？因为函数a外的变量c引用了函数a内的函数b，就是说：</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　<strong><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);">当函数a的内部函数b被函数a外的一个变量引用的时候，就创建了一个闭包。<br></span></strong></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　让我们说的更透彻一些。所谓“闭包”，就是在构造函数体内定义另外的函数作为目标对象的方法函数，而这个对象的方法函数反过来引用外层函数体中的临时变量。这使得只要目标 对象在生存期内始终能保持其方法，就能间接保持原构造函数体当时用到的临时变量值。尽管最开始的构造函数调用已经结束，临时变量的名称也都消失了，但在目 标对象的方法内却始终能引用到该变量的值，而且该值只能通这种方法来访问。即使再次调用相同的构造函数，但只会生成新对象和方法，新的临时变量只是对应新 的值，和上次那次调用的是各自独立的。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong><span style="line-height: 21.6px; font-size: 12px;">二、闭包有什么作用？<br></span></strong></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　简而言之，闭包的作用就是在a执行完并返回后，闭包使得Javascript的垃圾回收机制GC不会收回a所占用的资源，因为a的内部函数b的执行需要依赖a中的变量。这是对闭包作用的非常直白的描述，不专业也不严谨，但大概意思就是这样，理解闭包需要循序渐进的过程。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">在上面的例子中，由于闭包的存在使得函数a返回后，a中的i始终存在，这样每次执行c()，i都是自加1后alert出i的值。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　那 么我们来想象另一种情况，如果a返回的不是函数b，情况就完全不同了。因为a执行完后，b没有被返回给a的外界，只是被a所引用，而此时a也只会被b引 用，因此函数a和b互相引用但又不被外界打扰(被外界引用)，函数a和b就会被GC回收。(关于Javascript的垃圾回收机制将在后面详细介绍)</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><strong><span style="line-height: 21.6px; font-size: 12px;">三、闭包内的微观世界</span></strong></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">　　如果要更加深入的了解闭包以及函数a和嵌套函数b的关系，我们需要引入另外几个概念：函数的执行环境(excution context)、活动对象(call object)、作用域(scope)、作用域链(scope chain)。以函数a从定义到执行的过程为例阐述这几个概念。</p><ol style="margin-bottom: 10px; margin-left: 25px; padding: 0.3em 0px; list-style-position: initial; list-style-image: initial; line-height: 25px; word-break: break-word; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; widows: 1; background-color: rgb(255, 255, 255);"><li style="padding: 0px; list-style-type: decimal;">当<strong>定义</strong>函数a的时候，js解释器会将函数a的<strong>作用域链(scope chain)</strong>设置为<span style="line-height: 21.6px; font-size: 12px; color: rgb(255, 0, 0);"><strong>定义a时a所在的“环境”</strong></span>，如果a是一个全局函数，则scope chain中只有window对象。</li><li style="padding: 0px; list-style-type: decimal;">当<strong>执行</strong>函数a的时候，a会进入相应的<strong>执行环境(excution context)</strong>。</li><li style="padding: 0px; list-style-type: decimal;">在创建执行环境的过程中，首先会为a添加一个scope属性，即a的<strong>作用域</strong>，其值就为第1步中的scope chain。即a.scope=a的作用域链。</li><li style="padding: 0px; list-style-type: decimal;">然后执行环境会创建一个<strong>活动对象(call object)</strong>。活动对象也是一个拥有属性的对象，但它不具有原型而且不能通过JavaScript代码直接访问。创建完活动对象后，把活动对象添加到a的作用域链的最顶端。此时a的作用域链包含了两个对象：a的活动对象和window对象。</li><li style="padding: 0px; list-style-type: decimal;">下一步是在活动对象上添加一个arguments属性，它保存着调用函数a时所传递的参数。</li><li style="padding: 0px; list-style-type: decimal;">最后把所有函数a的形参和内部的函数b的引用也添加到a的活动对象上。在这一步中，完成了函数b的的定义，因此如同第3步，函数b的作用域链被设置为b所被定义的环境，即a的作用域。</li></ol><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">到此，整个函数a从定义到执行的步骤就完成了。此时a返回函数b的引用给c，又函数b的作用域链包含了对函数a的活动对象的引用，也就是说b可以访问到a中定义的所有变量和函数。函数b被c引用，函数b又依赖函数a，因此函数a在返回后不会被GC回收。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">当函数b执行的时候亦会像以上步骤一样。因此，执行时b的作用域链包含了3个对象：b的活动对象、a的活动对象和window对象，如下图所示：</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><img src="1ec13816-da44-419a-8b30-08a402deb491_128_files/2fef3100-c8dc-41cf-aca9-36049d16fc29.png" style="border: 1px solid rgb(204, 204, 204); vertical-align: bottom; padding: 1px; overflow: hidden; max-width: 650px;"></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">如图所示，当在函数b中访问一个变量的时候，搜索顺序是：</p><ol style="margin-bottom: 10px; margin-left: 25px; padding: 0.3em 0px; list-style-position: initial; list-style-image: initial; line-height: 25px; word-break: break-word; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; widows: 1; background-color: rgb(255, 255, 255);"><li style="padding: 0px; list-style-type: decimal;">先搜索自身的活动对象，如果存在则返回，如果不存在将继续搜索函数a的活动对象，依次查找，直到找到为止。</li><li style="padding: 0px; list-style-type: decimal;">如果函数b存在prototype原型对象，则在查找完自身的活动对象后先查找自身的原型对象，再继续查找。这就是Javascript中的变量查找机制。</li><li style="padding: 0px; list-style-type: decimal;">如果整个作用域链上都无法找到，则返回undefined。</li></ol><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">小结，本段中提到了两个重要的词语：函数的<strong>定义</strong>与<strong>执行</strong>。文中提到函数的作用域是在定义函数时候就已经确定，而不是在执行的时候确定（参看步骤1和3）。用一段代码来说明这个问题：</p><pre class="javascript" style="margin: 3px auto 0px; padding: 0px 0px 0px 5px; width: 640px; line-height: 20px; clear: both; font-size: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; border-left-style: solid; color: rgb(0, 0, 0); widows: 1; background-color: rgb(255, 255, 255); background-position: initial initial; background-repeat: initial initial;"><span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">function</span> f<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span>x<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">{</span> <br>  <span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">var</span> g <span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">=</span> <span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">function</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">{</span> <span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 0, 102);">return</span> x<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;</span> <span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">}<br></span>  <span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 0, 102);">return</span> g<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;<br></span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">}<br></span><span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">var</span> h <span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">=</span> f<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(204, 0, 0);">1</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;<br></span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 0, 102);">alert</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span>h<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;</span>&nbsp;</pre><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">这段代码中变量h指向了f中的那个匿名函数(由g返回)。</p><ul style="margin-bottom: 10px; margin-left: 25px; padding: 0.3em 0px; list-style: decimal; line-height: 25px; word-break: break-word; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; widows: 1; background-color: rgb(255, 255, 255);"><li style="padding: 0px; list-style-type: decimal;">假设函数h的作用域是在执行alert(h())确定的，那么此时h的作用域链是：h的活动对象-&gt;alert的活动对象-&gt;window对象。</li><li style="padding: 0px; list-style-type: decimal;">假设函数h的作用域是在定义时确定的，就是说h指向的那个匿名函数在定义的时候就已经确定了作用域。那么在执行的时候，h的作用域链为：h的活动对象-&gt;f的活动对象-&gt;window对象。</li></ul><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">如果第一种假设成立，那输出值就是undefined；如果第二种假设成立，输出值则为1。</p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">运行结果证明了第2个假设是正确的，说明函数的作用域确实是在定义这个函数的时候就已经确定了。<br><br></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px;"><strong>四、闭包的应用场景<br></strong></span>保护函数内的变量安全。以最开始的例子为例，函数a中i只有函数b才能访问，而无法通过其他途径访问到，因此保护了i的安全性。</p><ol style="margin-bottom: 10px; margin-left: 25px; padding: 0.3em 0px; list-style-position: initial; list-style-image: initial; line-height: 25px; word-break: break-word; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; font-size: 14px; widows: 1; background-color: rgb(255, 255, 255);"><li style="padding: 0px; list-style-type: decimal;">在内存中维持一个变量。依然如前例，由于闭包，函数a中i的一直存在于内存中，因此每次执行c()，都会给i自加1。</li><li style="padding: 0px; list-style-type: decimal;">通过保护变量的安全实现JS私有属性和私有方法（不能被外部访问）<br>私有属性和方法在Constructor外是无法被访问的<p style="padding: 5px 0px; font-size: 14px;"><span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">function</span>&nbsp;Constructor<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span>…<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span>&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">{</span>&nbsp;&nbsp;<br>&nbsp;&nbsp;<span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">var</span>&nbsp;that&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">=</span>&nbsp;<span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 0, 102);">this</span><span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;</span>&nbsp;&nbsp;<br>&nbsp;&nbsp;<span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">var</span>&nbsp;membername&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">=</span>&nbsp;value<span style="line-height: 21.6px; font-size: 12px; color: rgb(51, 153, 51);">;</span>&nbsp;<br>&nbsp;&nbsp;<span style="line-height: 21.6px; font-size: 12px; font-weight: bold; color: rgb(0, 51, 102);">function</span>&nbsp;membername<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">(</span>…<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">)</span>&nbsp;<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">{</span>…<span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">}<br></span><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 153, 0);">}</span></p></li></ol><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">以上3点是闭包最基本的应用场景，很多经典案例都源于此。<br><br></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);"><span style="line-height: 21.6px; font-size: 12px; color: rgb(153, 51, 0);"><strong><span style="line-height: 21.6px; font-size: 12px; color: rgb(0, 0, 0);">五、Javascript的垃圾回收机制<br></span></strong></span></p><p style="padding: 5px 0px; font-size: 14px; color: rgb(0, 0, 0); font-family: tahoma, arial, 宋体; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);">在Javascript中，如果一个对象不再被引用，那么这个对象就会被GC回收。如果两个对象互相引用，而不再被第3者所引用，那么这两个互相引用的对象也会被回收。因为函数a被b引用，b又被a外的c引用，这就是为什么函数a执行后不会被回收的原因。</p><br><div><small>来源：&nbsp;<a href="http://www.jb51.net/article/24101.htm" target="_blank" rel="external">http://www.jb51.net/article/24101.htm</a></small></div></div></body>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/前端/" rel="tag">#前端</a>
          
            <a href="/tags/js/" rel="tag">#js</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/03/IIFE/" rel="next" title="IIFE">
                <i class="fa fa-chevron-left"></i> IIFE
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/03/闭包和构造函数/" rel="prev" title="闭包和构造函数">
                闭包和构造函数 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="阿炸" />
          <p class="site-author-name" itemprop="name">阿炸</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">29</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/mideng2" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/MomILU" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目录</p>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿炸</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
